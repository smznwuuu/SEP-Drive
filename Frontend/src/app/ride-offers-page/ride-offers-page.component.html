<app-navbar></app-navbar>

<mat-card>
  <h2>Angebote zu deiner Fahranfrage</h2>

  <table
    mat-table
    [dataSource]="sortedOffers"
    matSort
    matSortActive="driverRating"
    matSortDirection="asc"
    matSortDisableClear
    (matSortChange)="sortRequests($event)"
    class="ride-request-table"
  >

    <!-- driverid-->
    <ng-container matColumnDef="driverId">
      <th mat-header-cell *matHeaderCellDef>Fahrer-ID</th>
      <td mat-cell *matCellDef="let offer">{{ offer.driverId }}</td>
    </ng-container>

    <!--driverrating-->
    <ng-container matColumnDef="driverRating">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Fahrerbewertung</th>
      <td mat-cell *matCellDef="let offer">{{ offer.driverRating }}</td>
    </ng-container>

    <!--fahrtenanzahl-->
    <ng-container matColumnDef="driverTotalRides">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Fahrten</th>
      <td mat-cell *matCellDef="let offer">{{ offer.driverTotalRides }}</td>
    </ng-container>

    <!--distance-->
    <ng-container matColumnDef="distance">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Distanz (km)</th>
      <td mat-cell *matCellDef="let offer">{{ offer.distance | number:'1.1-1' }} km</td>
    </ng-container>

    <!--annnehmen/ablehnen-->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Aktionen</th>
      <td mat-cell *matCellDef="let offer">
        <ng-container *ngIf="!offer.accepted; else angenommen">
          <button mat-button color="primary" (click)="accept(offer)">Annehmen</button>
          <button mat-button color="warn" (click)="reject(offer)">Ablehnen</button>
        </ng-container>
        <ng-template #angenommen>
          <span style="color: green; font-weight: bold;">Angenommen</span>
        </ng-template>
      </td>
    </ng-container>

    <!-- Chat -->
    <ng-container matColumnDef="chat">
      <th mat-header-cell *matHeaderCellDef>Chat</th>
      <td mat-cell *matCellDef="let offer">
        <button mat-raised-button color="primary" [routerLink]="['/chat', offer.driverId]">
          Chat
        </button>
      </td>
    </ng-container>


    <tr mat-header-row *matHeaderRowDef="spalten"></tr>
    <tr mat-row *matRowDef="let row; columns: spalten;"></tr>
  </table>
</mat-card>
